(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{285:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>o});var a=s(5155),r=s(2115),n=s(9708),l=s(2085),i=s(9434);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:r,size:l,className:s})),ref:t,...c})});d.displayName="Button"},4786:(e,t,s)=>{Promise.resolve().then(s.bind(s,8091))},6104:(e,t,s)=>{"use strict";let a;s.d(t,{db:()=>o,j:()=>i});var r=s(3915),n=s(3004),l=s(5317);a=(0,r.Dk)().length?(0,r.Dk)()[0]:(0,r.Wp)({apiKey:"AIzaSyBRbrMNMu7JOJdOQHWiFzO1Qrn3RXt7sXA",authDomain:"obsidianpass.firebaseapp.com",projectId:"obsidianpass",storageBucket:"obsidianpass.firebasestorage.app",messagingSenderId:"286105491644",appId:"1:286105491644:web:2996d3bb854bed1cec58b9",measurementId:"G-PHM0J33VDZ"});let i=(0,n.xI)(a),o=(0,l.aU)(a)},7049:(e,t,s)=>{"use strict";s.d(t,{D:()=>o,ThemeProvider:()=>i});var a=s(5155),r=s(2115);let n=(0,r.createContext)(void 0),l="passkeep-theme-preference",i=e=>{let{children:t}=e,[s,i]=(0,r.useState)("system"),[o,d]=(0,r.useState)("light");(0,r.useEffect)(()=>{let e=localStorage.getItem(l);e?i(e):i("system")},[]),(0,r.useEffect)(()=>{let e;d("system"===s?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":s)},[s]),(0,r.useEffect)(()=>{let e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(o),localStorage.setItem(l,s)},[o,s]),(0,r.useEffect)(()=>{if("system"!==s)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{d(e.matches?"dark":"light")};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[s]);let c=(0,r.useCallback)(e=>{i(e)},[]);return(0,a.jsx)(n.Provider,{value:{themePreference:s,appliedTheme:o,setThemePreference:c},children:t})},o=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},8091:(e,t,s)=>{"use strict";s.d(t,{AppLayout:()=>E});var a=s(5155),r=s(2115),n=s(5695),l=s(9576),i=s(285),o=s(172),d=s(1573),c=s(3349),u=s(8698),m=s(3158),f=s(518),p=s(154),h=s(9434);let x=u.bL,g=u.l9;u.YJ,u.ZL,u.Pb,u.z6,r.forwardRef((e,t)=>{let{className:s,inset:r,children:n,...l}=e;return(0,a.jsxs)(u.ZP,{ref:t,className:(0,h.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...l,children:[n,(0,a.jsx)(m.A,{className:"ml-auto"})]})}).displayName=u.ZP.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(u.G5,{ref:t,className:(0,h.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=u.G5.displayName;let v=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,a.jsx)(u.ZL,{children:(0,a.jsx)(u.UC,{ref:t,sideOffset:r,className:(0,h.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});v.displayName=u.UC.displayName;let b=r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(u.q7,{ref:t,className:(0,h.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...n})});b.displayName=u.q7.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,checked:n,...l}=e;return(0,a.jsxs)(u.H_,{ref:t,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(u.VF,{children:(0,a.jsx)(f.A,{className:"h-4 w-4"})})}),r]})}).displayName=u.H_.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(u.hN,{ref:t,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(u.VF,{children:(0,a.jsx)(p.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=u.hN.displayName;let y=r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(u.JU,{ref:t,className:(0,h.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...n})});y.displayName=u.JU.displayName;let N=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(u.wv,{ref:t,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});N.displayName=u.wv.displayName;var j=s(5977);let w=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(j.bL,{ref:t,className:(0,h.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});w.displayName=j.bL.displayName;let k=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(j._V,{ref:t,className:(0,h.cn)("aspect-square h-full w-full",s),...r})});k.displayName=j._V.displayName;let A=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(j.H4,{ref:t,className:(0,h.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});A.displayName=j.H4.displayName;var C=s(6936),_=s(8027),R=s(7049);function z(){let{setThemePreference:e}=(0,R.D)();return(0,a.jsxs)(x,{children:[(0,a.jsx)(g,{asChild:!0,children:(0,a.jsxs)(i.$,{variant:"outline",size:"icon",className:"h-10 w-10",children:[(0,a.jsx)(C.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(_.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(v,{align:"end",children:[(0,a.jsx)(b,{onClick:()=>e("light"),children:"Light"}),(0,a.jsx)(b,{onClick:()=>e("dark"),children:"Dark"}),(0,a.jsx)(b,{onClick:()=>e("system"),children:"System"})]})]})}function E(e){var t,s,u,m;let{children:f}=e,{user:p,isAuthenticated:h,isLoading:j,logout:C}=(0,l.A)(),_=(0,n.useRouter)(),[R,E]=(0,r.useState)(null),[P,L]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{L(!0),E(new Date().getFullYear())},[]),(0,r.useEffect)(()=>{!P||j||h||_.replace("/login")},[P,j,h,_]),!P||j||!h)return(0,a.jsx)("div",{className:"flex h-screen w-screen items-center justify-center bg-background",children:(0,a.jsx)(o.A,{className:"h-12 w-12 animate-spin text-primary"})});let S=(null==p?void 0:null===(s=p.displayName)||void 0===s?void 0:null===(t=s.charAt(0))||void 0===t?void 0:t.toUpperCase())||(null==p?void 0:null===(m=p.email)||void 0===m?void 0:null===(u=m.charAt(0))||void 0===u?void 0:u.toUpperCase())||"?";return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col bg-background",children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-7 w-7 text-primary"}),(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-primary",children:"ObsidianPass"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(z,{}),p&&(0,a.jsxs)(x,{children:[(0,a.jsx)(g,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,a.jsxs)(w,{className:"h-9 w-9",children:[p.photoURL&&(0,a.jsx)(k,{src:p.photoURL,alt:p.displayName||p.email||"User avatar"}),(0,a.jsx)(A,{className:"bg-primary text-primary-foreground",children:S})]})})}),(0,a.jsxs)(v,{className:"w-56",align:"end",forceMount:!0,children:[(0,a.jsx)(y,{className:"font-normal",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none text-foreground",children:p.displayName||"User"}),(0,a.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:p.email})]})}),(0,a.jsx)(N,{}),(0,a.jsxs)(b,{onClick:C,className:"cursor-pointer text-destructive focus:bg-destructive/10 focus:text-destructive",children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]})]})]})}),(0,a.jsx)("main",{className:"flex-1 container mx-auto px-4 py-8 sm:px-6 lg:px-8",children:f}),(0,a.jsx)("footer",{className:"py-6 text-center text-sm text-muted-foreground border-t",children:null!==R?"ObsidianPass \xa9 ".concat(R):"ObsidianPass"})]})}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2596),r=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},9576:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,AuthProvider:()=>o});var a=s(5155),r=s(2115),n=s(6104),l=s(3004);let i=(0,r.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e;let t=()=>{e=(0,l.hg)(n.j,e=>{o(e),c(!1)},e=>{console.error("Firebase Auth state listener error:",e),o(null),c(!1)})};return(0,l.oM)(n.j,l.F0).then(()=>{t()}).catch(s=>{console.error("Error setting Firebase auth persistence:",s),t(),e||(o(null),c(!1))}),()=>{e&&e()}},[]);let u=(0,r.useCallback)(async()=>{c(!0);let e=new l.HF;try{return await (0,l.df)(n.j,e),!0}catch(e){return console.error("Google Sign-In failed:",e),c(!1),!1}},[]),m=(0,r.useCallback)(async()=>{try{await (0,l.CI)(n.j)}catch(e){console.error("Sign out failed:",e)}},[]);return(0,a.jsx)(i.Provider,{value:{user:s,isAuthenticated:!!s,isLoading:d,loginWithGoogle:u,logout:m},children:t})},d=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,73,244,352,422,984,812,441,684,358],()=>t(4786)),_N_E=e.O()}]);