(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>l});var s=r(5155),a=r(2115),n=r(9708),i=r(2085),o=r(9434);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:r})),ref:t,...c})});d.displayName="Button"},2949:(e,t,r)=>{Promise.resolve().then(r.bind(r,8916))},6104:(e,t,r)=>{"use strict";let s;r.d(t,{db:()=>l,j:()=>o});var a=r(3915),n=r(3004),i=r(5317);s=(0,a.Dk)().length?(0,a.Dk)()[0]:(0,a.Wp)({apiKey:"AIzaSyBRbrMNMu7JOJdOQHWiFzO1Qrn3RXt7sXA",authDomain:"obsidianpass.firebaseapp.com",projectId:"obsidianpass",storageBucket:"obsidianpass.firebasestorage.app",messagingSenderId:"286105491644",appId:"1:286105491644:web:2996d3bb854bed1cec58b9",measurementId:"G-PHM0J33VDZ"});let o=(0,n.xI)(s),l=(0,i.aU)(s)},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>o,wL:()=>u});var s=r(5155),a=r(2115),n=r(9434);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},7481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var s=r(2115);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(d);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8916:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>e6});var s=r(5155),a=r(2115),n=r(9576),i=r(6104),o=r(5317),l=r(285),d=r(9434);let c=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});c.displayName="Input";var u=r(172),m=r(442),p=r(6523),f=r(4301),h=r(5074),x=r(960),w=r(2555),y=r(221),g=r(2177),b=r(5594),v=r(5452),j=r(5318);let N=v.bL;v.l9;let C=v.ZL;v.bm;let A=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(v.hJ,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a})});A.displayName=v.hJ.displayName;let k=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)(C,{children:[(0,s.jsx)(A,{}),(0,s.jsxs)(v.UC,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...n,children:[a,(0,s.jsxs)(v.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});k.displayName=v.UC.displayName;let S=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};S.displayName="DialogHeader";let E=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};E.displayName="DialogFooter";let P=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(v.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});P.displayName=v.hE.displayName;let U=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(v.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",r),...a})});U.displayName=v.VY.displayName;var I=r(9708),O=r(968),T=r(2085);let D=(0,T.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),F=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(O.b,{ref:t,className:(0,d.cn)(D(),r),...a})});F.displayName=O.b.displayName;let R=g.Op,L=a.createContext({}),V=e=>{let{...t}=e;return(0,s.jsx)(L.Provider,{value:{name:t.name},children:(0,s.jsx)(g.xI,{...t})})},W=()=>{let e=a.useContext(L),t=a.useContext(_),{getFieldState:r,formState:s}=(0,g.xW)(),n=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},_=a.createContext({}),z=a.forwardRef((e,t)=>{let{className:r,...n}=e,i=a.useId();return(0,s.jsx)(_.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,d.cn)("space-y-2",r),...n})})});z.displayName="FormItem";let J=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:n,formItemId:i}=W();return(0,s.jsx)(F,{ref:t,className:(0,d.cn)(n&&"text-destructive",r),htmlFor:i,...a})});J.displayName="FormLabel";let M=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:n,formDescriptionId:i,formMessageId:o}=W();return(0,s.jsx)(I.DX,{ref:t,id:n,"aria-describedby":a?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!a,...r})});M.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:n}=W();return(0,s.jsx)("p",{ref:t,id:n,className:(0,d.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let $=a.forwardRef((e,t)=>{var r;let{className:a,children:n,...i}=e,{error:o,formMessageId:l}=W(),c=o?String(null!==(r=null==o?void 0:o.message)&&void 0!==r?r:""):n;return c?(0,s.jsx)("p",{ref:t,id:l,className:(0,d.cn)("text-sm font-medium text-destructive",a),...i,children:c}):null});$.displayName="FormMessage";var B=r(5863);let G=a.forwardRef((e,t)=>{let{className:r,value:a,...n}=e;return(0,s.jsx)(B.bL,{ref:t,className:(0,d.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...n,children:(0,s.jsx)(B.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});G.displayName=B.bL.displayName;var Z=r(4607),H=r(7607),Y=r(7832),K=r(4073);let q=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsxs)(K.bL,{ref:t,className:(0,d.cn)("relative flex w-full touch-none select-none items-center",r),...a,children:[(0,s.jsx)(K.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(K.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(K.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});q.displayName=K.bL.displayName;var X=r(1992),Q=r(9556),ee=r(7381),et=r(518);let er=X.bL;X.YJ;let es=X.WT,ea=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)(X.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...n,children:[a,(0,s.jsx)(X.In,{asChild:!0,children:(0,s.jsx)(Q.A,{className:"h-4 w-4 opacity-50"})})]})});ea.displayName=X.l9.displayName;let en=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(X.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(ee.A,{className:"h-4 w-4"})})});en.displayName=X.PP.displayName;let ei=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(X.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(Q.A,{className:"h-4 w-4"})})});ei.displayName=X.wn.displayName;let eo=a.forwardRef((e,t)=>{let{className:r,children:a,position:n="popper",...i}=e;return(0,s.jsx)(X.ZL,{children:(0,s.jsxs)(X.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...i,children:[(0,s.jsx)(en,{}),(0,s.jsx)(X.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(ei,{})]})})});eo.displayName=X.UC.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(X.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=X.JU.displayName;let el=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)(X.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(X.VF,{children:(0,s.jsx)(et.A,{className:"h-4 w-4"})})}),(0,s.jsx)(X.p4,{children:a})]})});el.displayName=X.q7.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(X.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=X.wv.displayName;var ed=r(5599),ec=r(7481);let eu=b.Ik({length:b.ai().min(8).max(128),complexity:b.k5(["low","medium","high"])});function em(e){let{isOpen:t,setIsOpen:r,onPasswordGenerated:n}=e,[i,o]=(0,a.useState)(null),{toast:d}=(0,ec.dj)(),u=(0,g.mN)({resolver:(0,y.u)(eu),defaultValues:{length:16,complexity:"medium"}}),m=u.watch("length");async function p(e){o(null);try{let t=function(e,t){let r="",s="abcdefghijklmnopqrstuvwxyz",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n="0123456789";if(0===(r="low"===t?s+a+n:s+a+n+"!@#$%^&*()_+-=[]{};':\"\\|,.<>/?~`").length)return"";let i="",o=new Uint32Array(e);if(window.crypto&&window.crypto.getRandomValues){window.crypto.getRandomValues(o);for(let t=0;t<e;t++)i+=r[o[t]%r.length]}else{console.warn("crypto.getRandomValues not available, using Math.random() for password generation.");for(let t=0;t<e;t++)i+=r.charAt(Math.floor(Math.random()*r.length))}return i}(e.length,e.complexity);if(t)o(t),d({title:"Password Generated!",description:"A strong password has been created locally."});else throw Error("Local generator failed to produce a password.")}catch(e){console.error("Failed to generate password locally:",e),d({variant:"destructive",title:"Generation Failed",description:"Could not generate a password locally. Please try again."})}finally{}}return(0,s.jsx)(N,{open:t,onOpenChange:e=>{e||(o(null),u.reset()),r(e)},children:(0,s.jsxs)(k,{className:"sm:max-w-md",children:[(0,s.jsxs)(S,{children:[(0,s.jsxs)(P,{className:"flex items-center gap-2",children:[(0,s.jsx)(Y.A,{className:"h-5 w-5 text-primary"})," Generate Strong Password"]}),(0,s.jsx)(U,{children:"Craft a secure password locally. Adjust the options below."})]}),(0,s.jsx)(R,{...u,children:(0,s.jsxs)("form",{onSubmit:u.handleSubmit(p),className:"space-y-6 pt-4",children:[(0,s.jsx)(V,{control:u.control,name:"length",render:e=>{let{field:t}=e;return(0,s.jsxs)(z,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(J,{children:"Password Length"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-primary",children:[m," characters"]})]}),(0,s.jsx)(M,{children:(0,s.jsx)(q,{min:8,max:64,step:1,value:[t.value],onValueChange:e=>t.onChange(e[0])})}),(0,s.jsx)($,{})]})}}),(0,s.jsx)(V,{control:u.control,name:"complexity",render:e=>{let{field:t}=e;return(0,s.jsxs)(z,{children:[(0,s.jsx)(J,{children:"Complexity"}),(0,s.jsxs)(er,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(M,{children:(0,s.jsx)(ea,{children:(0,s.jsx)(es,{placeholder:"Select complexity"})})}),(0,s.jsxs)(eo,{children:[(0,s.jsx)(el,{value:"low",children:"Low (Letters & Numbers)"}),(0,s.jsx)(el,{value:"medium",children:"Medium (Letters, Numbers, Symbols)"}),(0,s.jsx)(el,{value:"high",children:"High (Letters, Numbers, Symbols - Enhanced)"})]})]}),(0,s.jsx)($,{})]})}}),(0,s.jsx)(l.$,{type:"submit",className:"w-full bg-accent hover:bg-accent/90 text-accent-foreground",children:"Generate Password"})]})}),i&&(0,s.jsxs)("div",{className:"mt-6 space-y-3 rounded-md border bg-secondary/50 p-4",children:[(0,s.jsx)(F,{htmlFor:"generated-password-output",className:"font-semibold text-foreground",children:"Generated Password:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c,{id:"generated-password-output",readOnly:!0,value:i,className:"flex-grow bg-background text-lg font-mono tracking-wider"}),(0,s.jsx)(l.$,{variant:"outline",size:"icon",onClick:()=>{i&&(navigator.clipboard?navigator.clipboard.writeText(i).then(()=>{d({title:"Password Copied!",description:"The generated password has been copied to your clipboard."})}).catch(e=>{console.error("Failed to copy: ",e),d({variant:"destructive",title:"Copy Failed",description:"Could not copy password to clipboard."})}):d({variant:"destructive",title:"Clipboard Unavailable",description:"Clipboard API is not available in this browser."}))},"aria-label":"Copy password",children:(0,s.jsx)(ed.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(l.$,{onClick:()=>{i&&(n(i),r(!1),o(null),u.reset())},className:"w-full mt-2 bg-primary hover:bg-primary/90 text-primary-foreground",children:"Use This Password"})]}),(0,s.jsx)(E,{className:"sm:justify-start mt-4",children:(0,s.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>{r(!1),o(null),u.reset()},children:"Close"})})]})})}function ep(e){let t,r,s,a,n,i=0,o={suggestions:[]};if(!e||0===e.length)return{score:0,text:"Very Weak",progressValue:0,colorClass:"[&>div]:bg-slate-300",textColorClass:"text-muted-foreground",feedback:{suggestions:["Enter a password to check its strength."]}};e.length<8?(o.warning="Password is too short.",o.suggestions.push("Use at least 8 characters.")):e.length<12?i+=1:i+=2;let l=/[a-z]/.test(e),d=/[A-Z]/.test(e),c=/[0-9]/.test(e),u=/[^A-Za-z0-9]/.test(e);switch(e.length>=4&&(l&&(i+=1),d&&(i+=1),c&&(i+=1),u&&(i+=1)),l||o.suggestions.push("Include lowercase letters (a-z)."),d||o.suggestions.push("Include uppercase letters (A-Z)."),c||o.suggestions.push("Include numbers (0-9)."),u||o.suggestions.push("Include symbols (e.g., !@#$)."),t=e.length<8?0:i<=2?1:i<=3?2:i<=5?3:4,e.length<8&&(t=0),t){case 0:r="Very Weak",s=20,a="[&>div]:bg-destructive",n="text-destructive";break;case 1:r="Weak",s=40,a="[&>div]:bg-orange-500",n="text-orange-500";break;case 2:r="Fair",s=60,a="[&>div]:bg-yellow-500",n="text-yellow-500";break;case 3:r="Good",s=80,a="[&>div]:bg-lime-500",n="text-lime-500";break;case 4:r="Strong",s=100,a="[&>div]:bg-green-500",n="text-green-500";break;default:r="Unknown",s=0,a="[&>div]:bg-slate-300",n="text-muted-foreground"}return{score:t,text:r,progressValue:s,colorClass:a,textColorClass:n,feedback:o}}let ef=b.Ik({websiteName:b.Yj().min(1,"Website name is required."),websiteUrl:b.Yj().url("Please enter a valid URL (e.g., https://example.com)").optional().or(b.eu("")),username:b.Yj().min(1,"Username is required."),password:b.Yj().min(1,"Password is required.")}),eh={score:0,text:"Very Weak",progressValue:0,colorClass:"[&>div]:bg-slate-300",textColorClass:"text-muted-foreground",feedback:{suggestions:[]}};function ex(e){let{isOpen:t,setIsOpen:r,onSave:n,existingCredential:i}=e,[o,d]=(0,a.useState)(!1),[m,p]=(0,a.useState)(!1),[f,h]=(0,a.useState)(!1),[x,w]=(0,a.useState)(eh),{toast:b}=(0,ec.dj)(),v=(0,g.mN)({resolver:(0,y.u)(ef),defaultValues:{websiteName:"",websiteUrl:"",username:"",password:""}}),j=(0,g.FH)({control:v.control,name:"password"});async function C(e){h(!0);let t={id:null==i?void 0:i.id,websiteName:e.websiteName,websiteUrl:e.websiteUrl,username:e.username,password:e.password,createdAt:null==i?void 0:i.createdAt};try{await n(t)}catch(e){console.error("Error in onSave callback from AddPasswordDialog:",e),b({variant:"destructive",title:"Save Error",description:"An unexpected error occurred while trying to save."})}finally{h(!1)}}(0,a.useEffect)(()=>{t&&(i?(v.reset({websiteName:i.websiteName,websiteUrl:i.websiteUrl||"",username:i.username,password:i.decryptedPassword||""}),i.decryptedPassword?w(ep(i.decryptedPassword)):w(eh)):(v.reset({websiteName:"",websiteUrl:"",username:"",password:""}),w(eh)))},[i,v,t]),(0,a.useEffect)(()=>{void 0===j?w(eh):w(ep(j))},[j]);let A=e=>{e||(v.reset(),w(eh)),r(e)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N,{open:t,onOpenChange:A,children:(0,s.jsxs)(k,{className:"sm:max-w-[425px] md:max-w-[550px]",children:[(0,s.jsxs)(S,{children:[(0,s.jsx)(P,{children:i?"Edit Credential":"Add New Credential"}),(0,s.jsx)(U,{children:i?"Update the details for this credential.":"Fill in the details for the new website or service."})]}),(0,s.jsx)(R,{...v,children:(0,s.jsxs)("form",{onSubmit:v.handleSubmit(C),className:"space-y-4 py-4",children:[(0,s.jsx)(V,{control:v.control,name:"websiteName",render:e=>{let{field:t}=e;return(0,s.jsxs)(z,{children:[(0,s.jsx)(J,{children:"Website Name"}),(0,s.jsx)(M,{children:(0,s.jsx)(c,{placeholder:"e.g., Google, Facebook",...t})}),(0,s.jsx)($,{})]})}}),(0,s.jsx)(V,{control:v.control,name:"websiteUrl",render:e=>{let{field:t}=e;return(0,s.jsxs)(z,{children:[(0,s.jsx)(J,{children:"Website URL (Optional)"}),(0,s.jsx)(M,{children:(0,s.jsx)(c,{placeholder:"e.g., https://www.google.com",...t})}),(0,s.jsx)($,{})]})}}),(0,s.jsx)(V,{control:v.control,name:"username",render:e=>{let{field:t}=e;return(0,s.jsxs)(z,{children:[(0,s.jsx)(J,{children:"Username or Email"}),(0,s.jsx)(M,{children:(0,s.jsx)(c,{placeholder:"Your username or email",...t})}),(0,s.jsx)($,{})]})}}),(0,s.jsx)(V,{control:v.control,name:"password",render:e=>{let{field:t}=e;return(0,s.jsxs)(z,{children:[(0,s.jsx)(J,{children:"Password"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-grow",children:[(0,s.jsx)(M,{children:(0,s.jsx)(c,{type:m?"text":"password",placeholder:"Enter or generate a password",...t,className:"pr-10"})}),(0,s.jsx)(l.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 h-7 w-7 -translate-y-1/2 text-muted-foreground hover:text-foreground",onClick:()=>p(!m),"aria-label":m?"Hide password":"Show password",children:m?(0,s.jsx)(Z.A,{className:"h-4 w-4"}):(0,s.jsx)(H.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)(l.$,{type:"button",variant:"outline",onClick:()=>d(!0),className:"shrink-0",children:[(0,s.jsx)(Y.A,{className:"mr-2 h-4 w-4 text-accent"})," Generate"]})]}),(0,s.jsx)($,{})," ",(j||v.formState.touchedFields.password||v.formState.dirtyFields.password)&&void 0!==j&&(0,s.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,s.jsx)(G,{value:x.progressValue,className:x.colorClass}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,s.jsx)("span",{className:"font-medium ".concat(x.textColorClass),children:x.text}),x.score>0&&j.length>0&&x.feedback.warning&&(0,s.jsx)("p",{className:"text-xs text-destructive",children:x.feedback.warning})]}),x.score<4&&j.length>0&&x.feedback.suggestions.length>0&&(0,s.jsxs)(s.Fragment,{children:[x.feedback.warning&&0===x.score&&(0,s.jsx)("p",{className:"text-xs text-destructive",children:x.feedback.warning}),(0,s.jsx)("ul",{className:"list-disc space-y-0.5 pl-4 text-xs text-muted-foreground",children:x.feedback.suggestions.map(e=>(0,s.jsx)("li",{children:e},e))})]})]})]})}}),(0,s.jsxs)(E,{children:[(0,s.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>A(!1),children:"Cancel"}),(0,s.jsxs)(l.$,{type:"submit",disabled:f,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:[f&&(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Save Changes":"Add Credential"]})]})]})})]})}),(0,s.jsx)(em,{isOpen:o,setIsOpen:d,onPasswordGenerated:e=>{v.setValue("password",e,{shouldValidate:!0,shouldDirty:!0,shouldTouch:!0})}})]})}var ew=r(3576);function ey(){if(!window.crypto||!window.crypto.subtle)throw Error("Web Crypto API is not available for fixed key material generation.");let e=new TextEncoder().encode("YourSecure32ByteEncryptionKeyStr");if(32!==e.byteLength)throw Error("Fixed encryption key must be 32 bytes for AES-256.");return crypto.subtle.importKey("raw",e,{name:"AES-GCM"},!1,["encrypt","decrypt"])}function eg(e){let t="",r=new Uint8Array(e),s=r.byteLength;for(let e=0;e<s;e++)t+=String.fromCharCode(r[e]);return btoa(t)}function eb(e){let t=atob(e),r=t.length,s=new Uint8Array(r);for(let e=0;e<r;e++)s[e]=t.charCodeAt(e);return s.buffer}async function ev(e){if(!window.crypto||!window.crypto.subtle)throw Error("Web Crypto API is not available in this environment.");if(!e)return JSON.stringify({iv:"",ciphertext:""});try{let t=await ey(),r=crypto.getRandomValues(new Uint8Array(12)),s=new TextEncoder().encode(e),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,s);return JSON.stringify({iv:eg(r),ciphertext:eg(a)})}catch(e){throw console.error("Encryption failed (fixed key):",e),Error("Could not encrypt password with fixed key.")}}async function ej(e){if(!window.crypto||!window.crypto.subtle)throw Error("Web Crypto API is not available in this environment.");if(!e){let t=JSON.parse(e);if(""===t.iv&&""===t.ciphertext)return"";throw Error("Encrypted payload is missing.")}try{let{iv:t,ciphertext:r}=JSON.parse(e);if(!t||!r){if(""===t&&""===r)return"";return console.warn("IV or Ciphertext missing in payload for fixed key decryption."),""}let s=await ey(),a=eb(t),n=eb(r),i=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},s,n);return new TextDecoder().decode(i)}catch(e){throw console.error("Decryption failed (fixed key):",e),Error("Could not decrypt password with fixed key. Data might be corrupted or key incorrect.")}}async function eN(e,t){if(!window.crypto||!window.crypto.subtle)throw Error("Web Crypto API is not available for key derivation.");let r=new TextEncoder().encode(e),s=await crypto.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:2e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async function eC(e,t){if(!window.crypto||!window.crypto.subtle)throw Error("Web Crypto API is not available for data encryption.");if(!t)throw Error("A secret key (password) is required for encryption.");try{let r=crypto.getRandomValues(new Uint8Array(16)),s=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(e),n=await eN(t,r),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},n,a);return JSON.stringify({salt:eg(r),iv:eg(s),ciphertext:eg(i)})}catch(e){throw console.error("Encryption with user password failed:",e),Error("Could not encrypt data with the provided secret key.")}}async function eA(e,t){if(!window.crypto||!window.crypto.subtle)throw Error("Web Crypto API is not available for data decryption.");if(!t)throw Error("A secret key (password) is required for decryption.");try{let{salt:r,iv:s,ciphertext:a}=JSON.parse(e);if(!r||!s||!a)throw Error("Malformed encrypted payload: missing salt, IV, or ciphertext.");let n=eb(r),i=eb(s),o=eb(a),l=await eN(t,n),d=await crypto.subtle.decrypt({name:"AES-GCM",iv:i},l,o);return new TextDecoder().decode(d)}catch(e){throw console.error("Decryption with user password failed:",e),Error("Could not decrypt data. The secret key might be incorrect or the data corrupted.")}}let ek=(0,T.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),eS=a.forwardRef((e,t)=>{let{className:r,variant:a,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,d.cn)(ek({variant:a}),r),...n})});eS.displayName="Alert";let eE=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,d.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});eE.displayName="AlertTitle";let eP=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("text-sm [&_p]:leading-relaxed",r),...a})});eP.displayName="AlertDescription";var eU=r(6606);function eI(e){let{isOpen:t,setIsOpen:r,onImportSubmit:n}=e,[i,o]=(0,a.useState)(null),[d,m]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),{toast:h}=(0,ec.dj)(),x=async()=>{if(!i){h({variant:"destructive",title:"No file selected",description:"Please select a file to import."});return}f(!0);let e=new FileReader;e.onload=async e=>{try{var t;let r=null===(t=e.target)||void 0===t?void 0:t.result,s=r,a=i.name.toLowerCase().endsWith(".json"),o=!1;if(d&&i.name.toLowerCase().endsWith(".json"))try{s=await eA(r,d),o=!0}catch(e){if(e.message.includes("Could not decrypt data")||e.message.includes("Malformed encrypted payload")){h({variant:"destructive",title:"Decryption Failed",description:"Could not decrypt the file. Secret key may be incorrect or file is not an ObsidianPass encrypted export."}),f(!1);return}console.warn("Decryption attempt failed, assuming file is not encrypted or using wrong key. Error:",e.message)}else!d&&i.name.toLowerCase().endsWith(".json")||i.name.toLowerCase().endsWith(".csv");let l=[],c=!1;try{let e=JSON.parse(s);if(c=!0,e&&Array.isArray(e.items))e.items.forEach(e=>{1===e.type&&e.login&&e.name&&e.login.username&&e.login.password&&l.push({websiteName:e.name,websiteUrl:e.login.uris&&e.login.uris[0]?e.login.uris[0].uri:"",username:e.login.username,passwordToEncrypt:e.login.password})});else if(Array.isArray(e))e.forEach(e=>{e.websiteName&&e.username&&e.password&&l.push({websiteName:e.websiteName,websiteUrl:e.websiteUrl||"",username:e.username,passwordToEncrypt:e.password})});else if(o)throw Error("Decrypted data is not a recognized JSON array format (Bitwarden or ObsidianPass).")}catch(e){if(c=!1,o);else if(a)throw Error("Selected .json file is malformed or not a supported format.")}if(!c||c&&0===l.length&&!o&&!i.name.toLowerCase().endsWith(".csv")){let e=function(e){let t=e.trim().split(/\r\n|\n/);if(t.length<2)return[];let r=t[0].split(",").map(e=>e.trim().replace(/^"|"$/g,"")),s=[];for(let e=1;e<t.length;e++){let a;let n=[],i=/(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|([^\",]*))(?:,|$)/g,o=t[e];for(;null!==(a=i.exec(o));){if(","===a[0]||""===a[0]){i.lastIndex===o.length&&o.endsWith(",")&&n.push("");continue}n.push(void 0!==a[1]?a[1].replace(/\"\"/g,'"'):(a[2]||"").trim()),i.lastIndex===o.length&&o.endsWith(",")&&r.length>n.length&&n.push("")}for(;n.length<r.length;)n.push("");if(n.length===r.length){let e={};r.forEach((t,r)=>{e[t]=n[r]}),s.push(e)}else console.warn("Skipping CSV line due to mismatched columns: ",t[e],"Expected:",r.length,"Got:",n.length)}return s}(s);if(e.length>0){let t=e[0];if(t.hasOwnProperty("name")&&t.hasOwnProperty("login_username")&&t.hasOwnProperty("login_password"))e.forEach(e=>{e.name&&e.login_username&&e.login_password&&l.push({websiteName:e.name,websiteUrl:e.login_uri||"",username:e.login_username,passwordToEncrypt:e.login_password})});else if(t.hasOwnProperty("websiteName")&&t.hasOwnProperty("username")&&t.hasOwnProperty("password"))e.forEach(e=>{e.websiteName&&e.username&&e.password&&l.push({websiteName:e.websiteName,websiteUrl:e.websiteUrl||"",username:e.username,passwordToEncrypt:e.password})});else if(o&&e.length>0)throw Error("Decrypted data is not a recognized CSV format (Bitwarden or ObsidianPass headers).");else if(!o&&i.name.toLowerCase().endsWith(".csv")&&e.length>0)throw Error("Unsupported CSV format. Headers do not match Bitwarden or ObsidianPass export formats.")}}if(0===l.length){let e="No compatible login credentials found in the file, or file was empty after header.";o&&d?e="Decrypted data did not contain recognizable credentials, or the secret key was incorrect for the file's actual content.":d&&!o&&(e="Secret key provided, but the file does not appear to be an ObsidianPass encrypted export. Attempted to parse as unencrypted."),h({variant:"destructive",title:"No Credentials Processed",description:e}),f(!1);return}await n(l),w(!1)}catch(e){console.error("Error parsing or processing file:",e),h({variant:"destructive",title:"Import Failed",description:e.message||"Could not process the file."})}finally{f(!1)}},e.onerror=()=>{h({variant:"destructive",title:"File Read Error",description:"Could not read the selected file."}),f(!1)},e.readAsText(i)},w=e=>{e||(o(null),m(""),f(!1)),r(e)};return(0,s.jsx)(N,{open:t,onOpenChange:w,children:(0,s.jsxs)(k,{className:"sm:max-w-md",children:[(0,s.jsxs)(S,{children:[(0,s.jsx)(P,{children:"Import Passwords"}),(0,s.jsx)(U,{children:"Select a JSON/CSV file (Bitwarden/ObsidianPass unencrypted) or an ObsidianPass encrypted (.json) export."})]}),(0,s.jsxs)("div",{className:"space-y-4 py-2",children:[(0,s.jsxs)(eS,{variant:"default",className:"bg-secondary/30 border-secondary/50",children:[(0,s.jsx)(eU.A,{className:"h-5 w-5 text-accent"}),(0,s.jsx)(eE,{className:"text-accent",children:"File Types"}),(0,s.jsxs)(eP,{className:"text-muted-foreground",children:["- For ",(0,s.jsx)("strong",{className:"text-foreground",children:"ObsidianPass encrypted files (.json)"}),", provide the secret key.",(0,s.jsx)("br",{}),"- For ",(0,s.jsx)("strong",{className:"text-foreground",children:"unencrypted Bitwarden/ObsidianPass JSON or CSV files"}),", leave the secret key blank."]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(F,{htmlFor:"password-file",children:"Password File (.json or .csv)"}),(0,s.jsx)(c,{id:"password-file",type:"file",accept:".json,.csv",onChange:e=>{e.target.files&&e.target.files[0]?o(e.target.files[0]):o(null)},className:"cursor-pointer",disabled:p}),i&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Selected: ",i.name]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(F,{htmlFor:"import-secret-key",className:"flex items-center",children:[(0,s.jsx)(ew.A,{className:"mr-2 h-4 w-4 text-muted-foreground"})," Secret Key (if file is encrypted)"]}),(0,s.jsx)(c,{id:"import-secret-key",type:"password",value:d,onChange:e=>m(e.target.value),placeholder:"Enter secret key if applicable",disabled:p})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Supports Bitwarden JSON/CSV, ObsidianPass unencrypted JSON/CSV, and ObsidianPass encrypted JSON exports."})]}),(0,s.jsxs)(E,{children:[(0,s.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>w(!1),disabled:p,children:"Cancel"}),(0,s.jsx)(l.$,{onClick:x,disabled:!i||p,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Import"})]})]})})}var eO=r(4059),eT=r(154);let eD=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(eO.bL,{className:(0,d.cn)("grid gap-2",r),...a,ref:t})});eD.displayName=eO.bL.displayName;let eF=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(eO.q7,{ref:t,className:(0,d.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...a,children:(0,s.jsx)(eO.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(eT.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});eF.displayName=eO.q7.displayName;var eR=r(1949),eL=r(2333),eV=r(5300);function eW(e){let{isOpen:t,setIsOpen:r,credentials:n}=e,[i,o]=(0,a.useState)("json"),[d,m]=(0,a.useState)(""),[p,f]=(0,a.useState)(""),[h,x]=(0,a.useState)(!1),{toast:w}=(0,ec.dj)(),y=async()=>{if(0===n.length){w({variant:"destructive",title:"Nothing to Export",description:"Your password vault is empty."});return}if(!d){w({variant:"destructive",title:"Secret Key Required",description:"Please enter a secret key to encrypt your export."});return}if(d!==p){w({variant:"destructive",title:"Keys Don't Match",description:"The secret keys entered do not match."});return}x(!0);try{let e=n.map(e=>({websiteName:e.websiteName,websiteUrl:e.websiteUrl||"",username:e.username,password:e.decryptedPassword})),t="";t="json"===i?JSON.stringify(e,null,2):function(e,t){if(!e||0===e.length)return"";let r=[];for(let s of(r.push(t.join(",")),e)){let e=t.map(e=>{let t=(void 0===s[e]||null===s[e]?"":String(s[e])).replace(/"/g,'""');return'"'.concat(t,'"')});r.push(e.join(","))}return r.join("\n")}(e,["websiteName","websiteUrl","username","password"]);let r=await eC(t,d),s=new Blob([r],{type:"application/json"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download="obsidianpass_export_encrypted_".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a),w({title:"Export Successful",description:"Your passwords have been securely encrypted and exported."}),g(!1)}catch(e){console.error("Export encryption failed:",e),w({variant:"destructive",title:"Export Failed",description:e.message||"Could not encrypt and export data."})}finally{x(!1)}},g=e=>{e||(o("json"),m(""),f(""),x(!1)),r(e)};return(0,s.jsx)(N,{open:t,onOpenChange:g,children:(0,s.jsxs)(k,{className:"sm:max-w-md",children:[(0,s.jsxs)(S,{children:[(0,s.jsx)(P,{children:"Export & Encrypt Passwords"}),(0,s.jsx)(U,{children:"Choose a format, then provide a secret key to encrypt your passwords before export."})]}),(0,s.jsxs)("div",{className:"space-y-4 py-2",children:[(0,s.jsxs)(eS,{variant:"destructive",className:"bg-destructive/10 border-destructive/50 text-destructive dark:text-red-400 dark:border-red-400/50 dark:bg-red-900/20",children:[(0,s.jsx)(eR.A,{className:"h-5 w-5 !text-destructive dark:!text-red-400"}),(0,s.jsx)(eE,{className:"text-destructive dark:text-red-300",children:"Important Security Note"}),(0,s.jsx)(eP,{className:"text-destructive/90 dark:text-red-400/90",children:"The exported file will be encrypted with your secret key. Store this key securely. Without it, you cannot decrypt and import the file. The original format (JSON/CSV) is embedded within the encrypted file."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(F,{htmlFor:"export-secret-key",className:"flex items-center",children:[(0,s.jsx)(ew.A,{className:"mr-2 h-4 w-4 text-muted-foreground"})," Secret Key for Encryption"]}),(0,s.jsx)(c,{id:"export-secret-key",type:"password",value:d,onChange:e=>m(e.target.value),placeholder:"Enter a strong password",disabled:h})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(F,{htmlFor:"export-confirm-secret-key",children:"Confirm Secret Key"}),(0,s.jsx)(c,{id:"export-confirm-secret-key",type:"password",value:p,onChange:e=>f(e.target.value),placeholder:"Re-enter your secret key",disabled:h}),d&&p&&d!==p&&(0,s.jsx)("p",{className:"text-xs text-destructive",children:"Secret keys do not match."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(F,{htmlFor:"export-format",children:"Original Format (will be encrypted)"}),(0,s.jsxs)(eD,{id:"export-format",value:i,onValueChange:e=>o(e),className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eF,{value:"json",id:"json-format",disabled:h}),(0,s.jsxs)(F,{htmlFor:"json-format",className:"flex items-center gap-1 cursor-pointer",children:[(0,s.jsx)(eL.A,{className:"h-4 w-4 text-muted-foreground"})," JSON"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eF,{value:"csv",id:"csv-format",disabled:h}),(0,s.jsxs)(F,{htmlFor:"csv-format",className:"flex items-center gap-1 cursor-pointer",children:[(0,s.jsx)(eV.A,{className:"h-4 w-4 text-muted-foreground"})," CSV"]})]})]})]})]}),(0,s.jsxs)(E,{children:[(0,s.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>g(!1),disabled:h,children:"Cancel"}),(0,s.jsx)(l.$,{onClick:y,disabled:0===n.length||!d||!p||d!==p||h,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Encrypting & Exporting..."]}):"Encrypt & Export"})]})]})})}var e_=r(6766),ez=r(6695),eJ=r(7679),eM=r(9339),e$=r(7223),eB=r(8294),eG=r(8044),eZ=r(7649);let eH=eZ.bL,eY=eZ.l9,eK=eZ.ZL,eq=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(eZ.hJ,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a,ref:t})});eq.displayName=eZ.hJ.displayName;let eX=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsxs)(eK,{children:[(0,s.jsx)(eq,{}),(0,s.jsx)(eZ.UC,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...a})]})});eX.displayName=eZ.UC.displayName;let eQ=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};eQ.displayName="AlertDialogHeader";let e0=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};e0.displayName="AlertDialogFooter";let e1=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(eZ.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold",r),...a})});e1.displayName=eZ.hE.displayName;let e2=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(eZ.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",r),...a})});e2.displayName=eZ.VY.displayName;let e5=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(eZ.rc,{ref:t,className:(0,d.cn)((0,l.r)(),r),...a})});e5.displayName=eZ.rc.displayName;let e4=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(eZ.ZD,{ref:t,className:(0,d.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...a})});e4.displayName=eZ.ZD.displayName;var e9=r(9677);function e8(e){let{credential:t,onEdit:r,onDelete:n}=e,[i,o]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null),[m,p]=(0,a.useState)(!1),[f,h]=(0,a.useState)(!1),{toast:x}=(0,ec.dj)();(0,a.useEffect)(()=>{if(t.websiteUrl)try{let e=new URL(t.websiteUrl.startsWith("http")?t.websiteUrl:"https://".concat(t.websiteUrl));u("https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=".concat(e.origin,"&size=32")),p(!1)}catch(e){console.warn("Invalid website URL for favicon:",t.websiteUrl),p(!0)}else p(!0)},[t.websiteUrl]),(0,a.useEffect)(()=>{f||o(!1)},[f]);let w=(e,t)=>{if(!e){x({variant:"destructive",title:"Nothing to Copy",description:"".concat(t," is not available.")});return}navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{x({title:"".concat(t," Copied!"),description:"".concat(t," has been copied to your clipboard.")})}).catch(e=>{console.error("Failed to copy: ",e),x({variant:"destructive",title:"Copy Failed",description:"Could not copy ".concat(t.toLowerCase()," to clipboard.")})}):x({variant:"destructive",title:"Clipboard Unavailable",description:"Clipboard API is not available in this browser."})},y=t.createdAt?(0,e9.m)(new Date(t.createdAt),{addSuffix:!0}):"some time ago",g=void 0===t.decryptedPassword?"Error decrypting":i?t.decryptedPassword:"••••••••••••",b=void 0!==t.decryptedPassword;return(0,s.jsxs)(ez.Zp,{className:"shadow-md hover:shadow-lg transition-shadow duration-300 ease-in-out",children:[(0,s.jsx)(ez.aR,{children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[" ",m||!c?(0,s.jsx)(eJ.A,{className:"h-8 w-8 text-muted-foreground flex-shrink-0"}):(0,s.jsx)(e_.default,{src:c,alt:"".concat(t.websiteName," logo"),width:32,height:32,className:"rounded flex-shrink-0",onError:()=>{console.warn("Failed to load favicon for:",t.websiteName,"URL:",c),p(!0)}}),(0,s.jsxs)("div",{className:"min-w-0",children:[" ",(0,s.jsx)(ez.ZB,{className:"text-xl font-semibold text-primary truncate",children:t.websiteName}),t.websiteUrl&&(0,s.jsx)("a",{href:t.websiteUrl.startsWith("http")?t.websiteUrl:"https://".concat(t.websiteUrl),target:"_blank",rel:"noopener noreferrer",className:"block text-sm text-accent hover:underline truncate",children:t.websiteUrl})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>h(!f),className:"h-8 w-8 text-muted-foreground hover:text-primary","aria-label":f?"Collapse":"Expand",children:f?(0,s.jsx)(ee.A,{className:"h-5 w-5"}):(0,s.jsx)(Q.A,{className:"h-5 w-5"})}),(0,s.jsxs)(l.$,{variant:"ghost",size:"icon",onClick:r,className:"h-8 w-8 text-muted-foreground hover:text-accent",children:[(0,s.jsx)(eM.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,s.jsxs)(eH,{children:[(0,s.jsx)(eY,{asChild:!0,children:(0,s.jsxs)(l.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",children:[(0,s.jsx)(e$.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Delete"})]})}),(0,s.jsxs)(eX,{children:[(0,s.jsxs)(eQ,{children:[(0,s.jsx)(e1,{children:"Are you sure?"}),(0,s.jsxs)(e2,{children:["This action cannot be undone. This will permanently delete the password for",(0,s.jsxs)("strong",{className:"text-foreground",children:[" ",t.websiteName]}),"."]})]}),(0,s.jsxs)(e0,{children:[(0,s.jsx)(e4,{children:"Cancel"}),(0,s.jsx)(e5,{onClick:n,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})}),(0,s.jsxs)("div",{className:(0,d.cn)("overflow-hidden transition-all duration-300 ease-in-out",f?"max-h-[1000px] opacity-100 visible":"max-h-0 opacity-0 invisible"),children:[(0,s.jsxs)(ez.Wu,{className:"space-y-3",children:[" ",(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-foreground min-w-0",children:[(0,s.jsx)(eB.A,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),(0,s.jsx)("span",{className:"font-medium hidden sm:inline",children:"Username:"}),(0,s.jsx)("span",{className:"font-medium sm:hidden",children:"User:"}),(0,s.jsx)("span",{className:"truncate",children:t.username})]}),(0,s.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>w(t.username,"Username"),className:"h-8 text-xs flex-shrink-0",children:[(0,s.jsx)(ed.A,{className:"mr-1 h-3 w-3"})," ",(0,s.jsx)("span",{className:"hidden sm:inline",children:"Copy"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-foreground min-w-0",children:[void 0===t.decryptedPassword?(0,s.jsx)(eR.A,{className:"h-5 w-5 text-destructive flex-shrink-0"}):(0,s.jsx)(eG.A,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),(0,s.jsx)("span",{className:"font-medium hidden sm:inline",children:"Password:"}),(0,s.jsx)("span",{className:"font-medium sm:hidden",children:"Pass:"}),(0,s.jsx)("span",{className:"truncate ".concat(void 0===t.decryptedPassword?"text-destructive":""),children:g})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[(0,s.jsxs)(l.$,{variant:"ghost",size:"icon",onClick:()=>o(!i),className:"h-8 w-8 text-muted-foreground hover:text-foreground",disabled:!b,children:[i?(0,s.jsx)(Z.A,{className:"h-4 w-4"}):(0,s.jsx)(H.A,{className:"h-4 w-4"}),(0,s.jsxs)("span",{className:"sr-only",children:[i?"Hide":"Show"," password"]})]}),(0,s.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>w(t.decryptedPassword,"Password"),className:"h-8 text-xs",disabled:!b,children:[(0,s.jsx)(ed.A,{className:"mr-1 h-3 w-3"})," ",(0,s.jsx)("span",{className:"hidden sm:inline",children:"Copy"})]})]})]})]}),(0,s.jsxs)(ez.wL,{className:"text-xs text-muted-foreground",children:[" ",(0,s.jsxs)("p",{children:["Added ",y]})]})]})]})}function e3(e){let{credentials:t,onEdit:r,onDelete:a}=e;return 0===t.length?(0,s.jsx)("p",{className:"text-center text-muted-foreground",children:"No credentials stored yet."}):(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,s.jsx)(e8,{credential:e,onEdit:()=>r(e),onDelete:()=>a(e.id)},e.id))})}function e6(){let{user:e,isLoading:t}=(0,n.A)(),{toast:r}=(0,ec.dj)(),[d,y]=(0,a.useState)([]),[g,b]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),[N,C]=(0,a.useState)(!1),[A,k]=(0,a.useState)(null),[S,E]=(0,a.useState)(!0),[P,U]=(0,a.useState)(""),I=(0,a.useCallback)(async()=>{if(!e){y([]),E(!1);return}E(!0);try{let t=(0,o.rJ)(i.db,"users/".concat(e.uid,"/credentials")),s=(0,o.P)(t),a=(await (0,o.GG)(s)).docs.map(async e=>{let t;let s=e.data();if(s.encryptedData)try{window.crypto&&window.crypto.subtle?t=await ej(s.encryptedData):console.warn("Web Crypto API not available for decryption, skipping for",s.websiteName)}catch(e){console.error("Failed to decrypt password for",s.websiteName,e),r({variant:"destructive",title:"Decryption Error",description:"Could not decrypt password for ".concat(s.websiteName,". Check console.")})}return{id:e.id,userId:s.userId,websiteName:s.websiteName,websiteUrl:s.websiteUrl,username:s.username,encryptedData:s.encryptedData,createdAt:s.createdAt instanceof o.Dc?s.createdAt.toDate().toISOString():s.createdAt,decryptedPassword:t}}),n=await Promise.all(a);n=n.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),y(n)}catch(e){console.error("Failed to load credentials from Firestore:",e),r({variant:"destructive",title:"Error",description:"Could not fetch credentials. Check console."}),y([])}finally{E(!1)}},[e,r]);(0,a.useEffect)(()=>{e?I():t||(y([]),E(!1))},[e,t,I]);let O=async t=>{if(!e||void 0===t.password){console.warn("User not authenticated or password undefined, cannot add credential.");return}if(!window.crypto||!window.crypto.subtle){console.error("Web Crypto API is not available. Ensure the app is served over HTTPS or on localhost."),r({variant:"destructive",title:"Encryption Error",description:"Web Crypto API not available. Use HTTPS or localhost."});return}try{let s=await ev(t.password),a={userId:e.uid,websiteName:t.websiteName,websiteUrl:t.websiteUrl||"",username:t.username,encryptedData:s,createdAt:new Date().toISOString()},n=(0,o.rJ)(i.db,"users/".concat(e.uid,"/credentials")),l=await (0,o.gS)(n,a),d={...a,id:l.id,decryptedPassword:t.password};y(e=>[...e,d].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),r({title:"Success",description:"".concat(t.websiteName," added.")}),b(!1)}catch(e){console.error("Error adding credential:",e),r({variant:"destructive",title:"Error",description:"Could not add credential. Check console for details."})}},T=async t=>{if(!e||!t.id||void 0===t.password){console.warn("User not authenticated, credential ID missing, or password undefined, cannot update credential.");return}if(!window.crypto||!window.crypto.subtle){console.error("Web Crypto API is not available. Ensure the app is served over HTTPS or on localhost."),r({variant:"destructive",title:"Encryption Error",description:"Web Crypto API not available. Use HTTPS or localhost."});return}try{let s=await ev(t.password),a=(0,o.H9)(i.db,"users/".concat(e.uid,"/credentials"),t.id),n={websiteName:t.websiteName,websiteUrl:t.websiteUrl||"",username:t.username,encryptedData:s};await (0,o.mZ)(a,n);let l={id:t.id,userId:e.uid,websiteName:t.websiteName,websiteUrl:t.websiteUrl,username:t.username,encryptedData:s,createdAt:t.createdAt,decryptedPassword:t.password};y(e=>e.map(e=>e.id===t.id?l:e).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),r({title:"Success",description:"".concat(t.websiteName," updated.")}),b(!1)}catch(e){console.error("Error updating credential:",e),r({variant:"destructive",title:"Error",description:"Could not update credential. Check console for details."})}},D=async t=>{if(e)try{let s=(0,o.H9)(i.db,"users/".concat(e.uid,"/credentials"),t);await (0,o.kd)(s),y(e=>e.filter(e=>e.id!==t)),r({title:"Success",description:"Credential deleted."})}catch(e){console.error("Error deleting credential:",e),r({variant:"destructive",title:"Error",description:"Could not delete credential. Check console."})}},F=async t=>{if(!e){r({variant:"destructive",title:"Authentication Error",description:"You must be logged in to import passwords."});return}if(!window.crypto||!window.crypto.subtle){r({variant:"destructive",title:"Encryption Error",description:"Web Crypto API not available. Use HTTPS or localhost."});return}let s=0,a=(0,o.rJ)(i.db,"users/".concat(e.uid,"/credentials")),n=[];for(let i of t)try{let t=await ev(i.passwordToEncrypt),r={userId:e.uid,websiteName:i.websiteName,websiteUrl:i.websiteUrl||"",username:i.username,encryptedData:t,createdAt:new Date().toISOString()},l=await (0,o.gS)(a,r);n.push({...r,id:l.id,decryptedPassword:i.passwordToEncrypt}),s++}catch(e){console.error("Error importing credential:",i.websiteName,e),r({variant:"destructive",title:"Import Error: ".concat(i.websiteName),description:"Could not import this credential. Check console."})}s>0?(y(e=>[...e,...n].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),r({title:"Import Successful",description:"".concat(s," of ").concat(t.length," credentials imported.")})):t.length>0&&r({variant:"destructive",title:"Import Failed",description:"No credentials were imported. Check console for errors."})},R=()=>{k(null),b(!0)},L=(0,a.useMemo)(()=>P?d.filter(e=>e.websiteName.toLowerCase().includes(P.toLowerCase())||e.username&&e.username.toLowerCase().includes(P.toLowerCase())):d,[d,P]);return t||S&&e?(0,s.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,s.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary"})}):e||t?(0,s.jsxs)("div",{className:"space-y-8 animate-in fade-in-0 duration-300 ease-out",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight text-foreground",children:"Password Vault"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage your saved credentials securely."})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col items-stretch gap-2 sm:w-auto sm:flex-row sm:flex-wrap sm:items-center",children:[(0,s.jsxs)(l.$,{onClick:()=>j(!0),variant:"outline",className:"w-full sm:w-auto justify-center border-accent text-accent hover:bg-accent/10",children:[(0,s.jsx)(m.A,{className:"mr-2 h-5 w-5"}),"Import"]}),(0,s.jsxs)(l.$,{onClick:()=>C(!0),variant:"outline",className:"w-full sm:w-auto justify-center border-accent text-accent hover:bg-accent/10",children:[(0,s.jsx)(p.A,{className:"mr-2 h-5 w-5"}),"Export"]}),(0,s.jsxs)(l.$,{onClick:R,className:"w-full sm:w-auto justify-center bg-primary hover:bg-primary/90 text-primary-foreground",children:[(0,s.jsx)(f.A,{className:"mr-2 h-5 w-5"}),"Add New"]})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,s.jsx)(c,{type:"search",placeholder:"Search by website name or username...",className:"w-full rounded-md border bg-background py-2 pl-10 pr-4 focus:ring-accent focus:border-accent",value:P,onChange:e=>U(e.target.value)})]}),S&&!L.length&&(0,s.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,s.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary"})}),S||0!==d.length||""!==P?S||0!==L.length||""===P?!S&&L.length>0&&(0,s.jsx)(e3,{credentials:L,onEdit:e=>{k(e),b(!0)},onDelete:D}):(0,s.jsx)(ez.Zp,{className:"text-center shadow-lg transition-shadow duration-300 hover:shadow-xl",children:(0,s.jsxs)(ez.aR,{children:[(0,s.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-secondary text-destructive",children:(0,s.jsx)(w.A,{className:"h-8 w-8"})}),(0,s.jsx)(ez.ZB,{className:"text-xl sm:text-2xl font-semibold text-foreground",children:"No Results Found"}),(0,s.jsxs)(ez.BT,{className:"text-sm text-muted-foreground",children:['No credentials match your search term "',P,'". Try a different search.']})]})}):(0,s.jsxs)(ez.Zp,{className:"text-center shadow-lg border-dashed border-2 border-border hover:border-primary transition-colors duration-300",children:[(0,s.jsxs)(ez.aR,{children:[(0,s.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-secondary text-primary",children:(0,s.jsx)(x.A,{className:"h-8 w-8"})}),(0,s.jsx)(ez.ZB,{className:"text-xl sm:text-2xl font-semibold text-foreground",children:"Your Vault is Empty"}),(0,s.jsx)(ez.BT,{className:"text-sm text-muted-foreground",children:"Start by adding your first website credential or import existing passwords."})]}),(0,s.jsxs)(ez.Wu,{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,s.jsxs)(l.$,{onClick:R,variant:"outline",className:"text-primary border-primary hover:bg-primary/10",children:[(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Add Your First Credential"]}),(0,s.jsxs)(l.$,{onClick:()=>j(!0),variant:"outline",className:"text-accent border-accent hover:bg-accent/10",children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Import Passwords"]})]})]}),(0,s.jsx)(ex,{isOpen:g,setIsOpen:b,onSave:A?e=>T(e):e=>O(e),existingCredential:A}),(0,s.jsx)(eI,{isOpen:v,setIsOpen:j,onImportSubmit:F}),(0,s.jsx)(eW,{isOpen:N,setIsOpen:C,credentials:d.filter(e=>void 0!==e.decryptedPassword)})]}):(0,s.jsxs)("div",{className:"flex h-64 flex-col items-center justify-center text-center",children:[(0,s.jsx)(ez.ZB,{className:"text-2xl font-semibold text-foreground",children:"Please log in"}),(0,s.jsx)(ez.BT,{className:"text-muted-foreground",children:"You need to be logged in to view your password vault."})]})}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2596),a=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},9576:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>l});var s=r(5155),a=r(2115),n=r(6104),i=r(3004);let o=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e;let t=()=>{e=(0,i.hg)(n.j,e=>{l(e),c(!1)},e=>{console.error("Firebase Auth state listener error:",e),l(null),c(!1)})};return(0,i.oM)(n.j,i.F0).then(()=>{t()}).catch(r=>{console.error("Error setting Firebase auth persistence:",r),t(),e||(l(null),c(!1))}),()=>{e&&e()}},[]);let u=(0,a.useCallback)(async()=>{c(!0);let e=new i.HF;try{return await (0,i.df)(n.j,e),!0}catch(e){return console.error("Google Sign-In failed:",e),c(!1),!1}},[]),m=(0,a.useCallback)(async()=>{try{await (0,i.CI)(n.j)}catch(e){console.error("Sign out failed:",e)}},[]);return(0,s.jsx)(o.Provider,{value:{user:r,isAuthenticated:!!r,isLoading:d,loginWithGoogle:u,logout:m},children:t})},d=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,73,244,352,422,984,702,441,684,358],()=>t(2949)),_N_E=e.O()}]);